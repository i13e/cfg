#!/bin/sh

# This file runs when a DM logs you into a graphical session.
# If you use startx/xinit, this file will also be sourced.

xrdb "$HOME/.config/x11/xresources" #& xrdbpid=$!
"$HOME"/.local/bin/layout           # set the layout & background of the screen
"$HOME"/.local/bin/remaps      	    # run the remaps script, switching caps/esc and more; check it for more info
"$HOME"/.local/bin/setbg

autostart="syncthing --no-browser
picom --experimental-backends
lxpolkit
unclutter
redshift
sxhkd
"
printf "%s" "$autostart" | while IFS="" read -r program; do
    pgrep -fl "$program" || $program &
done #>/dev/null 2>&1

# as a bash array.
# startup=("list programs" "to" "run here")
# for program in "${startup[@]}"; do
#     pgrep -fl "$program" || $program &
# done

# Ensure that xrdb has finished before moving on.
#[ -n "$xrdbpid" ] && wait "$xrdbpid"
